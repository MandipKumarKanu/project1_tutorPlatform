<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Teacher Details</title>
</head>

<body>
  <h2>Teacher Details</h2>

  <div id="detailsContainer">
    <!-- Teacher details will be added dynamically -->
  </div>

  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js";
    import { getAnalytics } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-analytics.js";
    import {
      getFirestore,
      doc,
      getDoc,
    } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js";

    const firebaseConfig = {
      apiKey: "AIzaSyChaQ4bBC3eP21SHvolyQsKCYhoam-HGIw",
      authDomain: "sample-side-d8f69.firebaseapp.com",
      projectId: "sample-side-d8f69",
      storageBucket: "sample-side-d8f69.appspot.com",
      messagingSenderId: "161040903419",
      appId: "1:161040903419:web:50d0f5a9ae860f9ce6d45e"
    };

    const app = initializeApp(firebaseConfig);
    const analytics = getAnalytics(app);
    const firestore = getFirestore(app);

    async function fetchTeacherDetails() {
      // Get the docId from the query parameter
      const urlParams = new URLSearchParams(window.location.search);
      const docId = urlParams.get('id');

      if (!docId) {
        console.error('No document ID provided in the URL.');
        return;
      }

      const teacherDocRef = doc(firestore, "approve_Teacher", docId);

      try {
        const teacherDoc = await getDoc(teacherDocRef);

        if (teacherDoc.exists()) {
          const teacherData = teacherDoc.data();

          const detailsContainer = document.getElementById("detailsContainer");
          detailsContainer.innerHTML = `<p>Email: ${teacherData.email}</p>
                                         <p>Name: ${teacherData.name}</p>
                                         <img src="${teacherData.picture}" alt="Teacher Image"/>`;
        } else {
          console.error('Teacher document not found.');
        }
      } catch (error) {
        console.error("Error fetching document:", error);
      }
    }

    fetchTeacherDetails();
  </script>
</body>

</html>
